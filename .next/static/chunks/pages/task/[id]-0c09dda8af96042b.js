(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{577:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/task/[id]",function(){return t(4681)}])},6722:function(e,n,t){"use strict";t.d(n,{g:function(){return i}});var s=t(5893),a=t(1616),o=t.n(a);function i(e){let{...n}=e;return(0,s.jsx)("textarea",{className:o().textarea,...n})}},4681:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return _},default:function(){return x}});var s=t(5893),a=t(9008),o=t.n(a),i=t(9480),l=t.n(i),r=t(7675),c=t(6722),d=t(7294),u=t(3299),m=t(9583),h=t(9828),_=!0;function x(e){let{item:n,allComments:t}=e,{data:a}=(0,u.useSession)(),[i,_]=(0,d.useState)(""),[x,f]=(0,d.useState)(t||[]);async function v(e){var t,s,o,l,c,d;if(e.preventDefault(),""!==i&&(null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.email)&&(null==a?void 0:null===(s=a.user)||void 0===s?void 0:s.name))try{let e=await (0,h.ET)((0,h.hJ)(r.db,"comments"),{comment:i,created:new Date,user:null==a?void 0:null===(o=a.user)||void 0===o?void 0:o.email,name:null==a?void 0:null===(l=a.user)||void 0===l?void 0:l.name,taskId:null==n?void 0:n.taskId}),t={id:e.id,comment:i,user:null==a?void 0:null===(c=a.user)||void 0===c?void 0:c.email,name:null==a?void 0:null===(d=a.user)||void 0===d?void 0:d.name,taskId:null==n?void 0:n.taskId};f(e=>[...e,t]),_("")}catch(e){console.log(e)}}async function j(e){try{let n=(0,h.JU)(r.db,"comments",e);await (0,h.oe)(n);let t=x.filter(n=>n.id!==e);f(t)}catch(e){console.log(e)}}return(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:"Tarefa - Detalhes da Tarefa"})}),(0,s.jsxs)("main",{className:l().main,children:[(0,s.jsx)("h1",{children:"Tarefa"}),(0,s.jsx)("article",{className:l().task,children:(0,s.jsx)("p",{children:n.tarefa})})]}),(0,s.jsxs)("section",{className:l().commentsContainer,children:[(0,s.jsx)("h2",{children:"Deixar comentarios"}),(0,s.jsxs)("form",{onSubmit:v,children:[(0,s.jsx)(c.g,{value:i,placeholder:"digite seu coment\xe1rio....",onChange:e=>_(e.target.value)}),(0,s.jsx)("button",{className:l().button,disabled:!(null==a?void 0:a.user),children:"Enviar coment\xe1rio"})]})]}),(0,s.jsxs)("section",{className:l().commentsContainer,children:[(0,s.jsx)("h2",{children:"Todos coment\xe1rios"}),0===x.length&&(0,s.jsx)("span",{children:"Nenhum comentario foi encontrado..."}),x.map(e=>{var n;return(0,s.jsxs)("article",{className:l().comment,children:[(0,s.jsxs)("div",{className:l().headComment,children:[(0,s.jsx)("label",{className:l().commentsLabel,children:e.name}),e.user===(null==a?void 0:null===(n=a.user)||void 0===n?void 0:n.email)&&(0,s.jsx)("button",{className:l().buttonTrash,onClick:()=>j(e.id),children:(0,s.jsx)(m.Xm5,{size:18,color:"#ea3140"})})]}),(0,s.jsx)("p",{children:e.comment})]},e.id)})]})]})}},7675:function(e,n,t){"use strict";t.d(n,{db:function(){return i}});var s=t(3977),a=t(9828);let o=(0,s.ZF)({apiKey:"AIzaSyDlfkPx2aZQh0qBUhI4-hc4Hyw4HjAZ5qQ",authDomain:"tarefasnextjs.firebaseapp.com",projectId:"tarefasnextjs",storageBucket:"tarefasnextjs.appspot.com",messagingSenderId:"511684015289",appId:"1:511684015289:web:400efa9b67f43956da5768"}),i=(0,a.ad)(o)},1616:function(e){e.exports={textarea:"styles_textarea__UoB2p"}},9480:function(e){e.exports={container:"styles_container__Sq8hF",main:"styles_main__HXFVR",task:"styles_task__Fad5H",commentsContainer:"styles_commentsContainer__unCk3",button:"styles_button__OQxz6",comment:"styles_comment__vtH9n",headComment:"styles_headComment__RzhyT",commentsLabel:"styles_commentsLabel__xBI1G",buttonTrash:"styles_buttonTrash__KjSST"}}},function(e){e.O(0,[445,16,887,774,888,179],function(){return e(e.s=577)}),_N_E=e.O()}]);